<?xml version="1.0" encoding="ISO-8859-1"?>
<SpProg type="pr" subtype="none"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://omp.jach.hawaii.edu/schema/TOML">

  <meta_gui_collapsed>false</meta_gui_collapsed>
  <meta_gui_filename>TEMP-LIB-UPDATE.xml</meta_gui_filename>
  <ot_version>20060803</ot_version>
  <telescope>ukirt</telescope>
  <SpNote type="no" subtype="none">
    <meta_gui_collapsed>false</meta_gui_collapsed>
    <note>Observing Point Sources
==============

There are two MSBs for observing Point Sources;  one assumes that the science target is a bright point source which the DR can "find" in the reduced spectral image and display.  The second assumes that the science target is faint.  In this case, the DR will find the rows containing the standard star and assume that the science target lies on the same rows.  These rows will be extracted and displayed. Please bear this in mind when acquiring targets - the standard star and science target should be positioned on the same row AND column (same x-y pixel in imaging acquisition) if the science target is faint.

In both cases, the source is nodded up and down the slit (offset +6" then -6").

Observing Extended Sources
=================

"Extended sources nod to sky" is the default for observing large extended objects. Here, the slit is nodded completely off source so that the target is only on the slit in 50% of the frames.

If, however, the science target is only marginally extended then consider using one of the "extended source slide along slit" MSBs, which are essentially the same as the point source MSB, except that a much larger slide (and a different DR recipe) is used.   Slides of up to +30" and -30" are possible.

Slitless Spectroscopy
=============

This mode is also now available, although we have very little experience with this type of spectroscopy.  In the UIST component, under slit mask, users should select "small field".  This will give a 60x60 arcsec aperture on the sky.  The image plane can be rotated so that dispersed spectra do not overlap on the array (using the Pos. angle). See the UIST web pages for further details, or contact Chris Davis (c.davis@jach.hawaii.edu).</note>
    <title>Which MSB should I use??</title>
  </SpNote>
  <SpNote type="no" subtype="none">
    <meta_gui_collapsed>false</meta_gui_collapsed>
    <note>WHICH SLIT SHOULD I USE?
----------------------
Because of internal focus limitations, we have had to install seperate slits for IJ and JH grism spectroscopy.  You should find that you can ONLY use the 2_pix_wide_120s and 4_pix_wide_120s slits with the IJ and JH grisms.  The other slits (1_pix_wide_120, 2_pix_wide_120 and 4_pix_wide_120) should be used with ALL OTHER grisms.   

Bottom line - the OT will NOT allow you to make an incorrect selection.

Note that the wider 5-pixel and 7-pixel slits can be used with ALL grisms (IJ, JH, HK, short-J, long-J, etc...)

POSITION ANGLES
----------------
The default slit PA is -90 so that it matches the UIST imaging orientation (it makes imaging acquisition a bit simpler!), though any angle, between -90 and +90 (measured E of N) can be used.</note>
    <title>Important info. about SLITS</title>
  </SpNote>
  <SpMSB checksum="b9ac6ac4e9a8b64655db5e8e42763bd6A" remaining="99" type="og" subtype="msb">
    <meta_gui_collapsed>true</meta_gui_collapsed>
    <estimatedDuration units="seconds">660.41988</estimatedDuration>
    <library_version>$Revision$</library_version>
    <priority>99</priority>
    <title>Coronographic Imaging</title>
    <totalDuration units="seconds">660.41988</totalDuration>
    <SpObs msb="false" optional="false" remaining="1" type="ob" subtype="none">
      <meta_gui_collapsed>true</meta_gui_collapsed>
      <estimatedDuration units="seconds">660.41988</estimatedDuration>
      <standard>false</standard>
      <title>0.7 arcsec wire/19-point offsets</title>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>Basic Idea:
=======

With Coronographic imaging, the user may use either a 6-pixel (0.7arcsec) or an 11-pixel (1.3 arcsec) wire.  These are suspended 1/4 and 3/4 of the way along a 120"x20" rectangular aperture (needed for coronographic polarimetry).  The posn angle can be used to orientate the source so that extended objects are perpendicular to the wire; e.g. a disk orientated E-W should use a Posn-angle of 0 degs, while a disk orientated N-S should use a posn angle of -90 degs.  Any angle between -90 and +90 degrees can be used.

By default the acquisition process described below will put the source behind the 6-pixel wire.  If the wider occultor is required, all offsets should have a p value of -62.6 arcsec (this being the distance between the two wires); note, offsets in q are along the wire, which is ~20" in length..

Imaging acquisition:
============

In the UIST component below, set the instrument for coronographic imaging (coron mask, filter, full array, NDSTARE, etc.) but SELECT A SHORT EXPOSURE TIME for imaging acquisition (1sec for bright stars/point sources, maybe with a few coadds).  The exposure time to be used for the actual coronographic imaging will be set in the "UIST Imaging" iterator further down the sequence.

At the telescope UIST will be set for coronographic observations with your chosen posn angles BUT it will have a short exposure time.  At the break in the sequence, the observer runs Movie, acquires the target as if he/she were doing spectroscopy (i.e. using Gaia - pick object and UPICK on the TCS) , then continues the sequence.  Immediately after acquisition a short-exposure frame will be taken on the target (so you can see that its behind the wire) before the exposure time/coadds are increased for the actual coronagraphic observations.</note>
        <title>HOW TO DO CORONOGRAPHIC IMAGING</title>
      </SpNote>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>Enter your target co-ordinates into the target list below.  Note that although this is called a "target list" it really only allows you to specify ONE astronomical target

When you have done so you can use the "position editor" to  select a guide star, to fine tune the co-ordinate based on a sky-survey picture, examine offset locations on the field etc.

For a step-by-step guide to how to use the position editor use "help".</note>
        <title>Target information</title>
      </SpNote>
      <SpTelescopeObsComp type="oc" subtype="targetList">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <meta_gui_selectedTelescopePos>Base</meta_gui_selectedTelescopePos>
        <meta_unique>true</meta_unique>
        <BASE TYPE="Base">
          <target>
            <targetName>Object Name</targetName>
            <spherSystem SYSTEM="J2000">
              <c1>0:00:00</c1>
              <c2>0:00:00</c2>
              <rv defn="radio" frame="LSR">0.0</rv>
            </spherSystem>
          </target>
        </BASE>
      </SpTelescopeObsComp>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>Make sure the coronograph is selected and the exposure time is short (1sec usually) for IMAGING ACQUISITION.</note>
        <title>UIST component</title>
      </SpNote>
      <SpInstUIST type="oc" subtype="inst.UIST">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <meta_unique>true</meta_unique>
        <meta_version>3</meta_version>
        <DAConf>ND1</DAConf>
        <DAConfMinExpT>0.81</DAConfMinExpT>
        <arrayAngle>0.54</arrayAngle>
        <biasDutyCycle>0.507</biasDutyCycle>
        <biasIdlePeriod>0.0022</biasIdlePeriod>
        <biasMustIdles>100</biasMustIdles>
        <biasNResets>2</biasNResets>
        <biasObsTime>9.468</biasObsTime>
        <biasReadArea>1024x1024</biasReadArea>
        <biasRefPixelX>512.5</biasRefPixelX>
        <biasRefPixelY>512.5</biasRefPixelY>
        <biasWaveform>uist_starev11</biasWaveform>
        <camera>imaging</camera>
        <centralWavelength>2.2</centralWavelength>
        <chopDelay>0.0</chopDelay>
        <chopFrequency>0.0</chopFrequency>
        <coadds>1</coadds>
        <configType>Normal</configType>
        <darkFilter>black_blank</darkFilter>
        <disperser>open</disperser>
        <dispersion>0.0</dispersion>
        <dutyCycle>0.31847539459101387</dutyCycle>
        <expTimeOT>1.0</expTimeOT>
        <exposureTime>1.0</exposureTime>
        <filter>K98</filter>
        <filterCategory>broad</filterCategory>
        <focus>2.61</focus>
        <idlePeriod>0.0022</idlePeriod>
        <imager>0.12</imager>
        <instAper>
          <value>27.93</value>
          <value>-1.11</value>
          <value>0.00</value>
          <value>2.00</value>
        </instAper>
        <instPntgOffset>
          <value>17.24</value>
          <value>8.2076</value>
        </instPntgOffset>
        <instPort>South</instPort>
        <mask>coronograph</mask>
        <maskHeight>20.0</maskHeight>
        <maskWidth>1024.0</maskWidth>
        <mode>NDSTARE</mode>
        <mustIdles>100</mustIdles>
        <nreads>2</nreads>
        <nresets>1</nresets>
        <nullCycles>0</nullCycles>
        <nullExposures>0</nullExposures>
        <nullReads>1</nullReads>
        <obsTimeOT>10.0</obsTimeOT>
        <observationTime>3.1399600000000003</observationTime>
        <order>0</order>
        <pixelFOV>0.1205 x 0.1205</pixelFOV>
        <pixelScale>0.12</pixelScale>
        <polarimetry>no</polarimetry>
        <posAngle>-90.0</posAngle>
        <pupil_imaging>no</pupil_imaging>
        <readArea>1024x1024</readArea>
        <readInterval>1.0</readInterval>
        <readMode>NDSTARE</readMode>
        <readout>NDSTARE</readout>
        <readoutOT>NDSTARE 1024x1024</readoutOT>
        <refPixelL>512.5</refPixelL>
        <refPixelS>480.5</refPixelS>
        <refPixelX>480.5</refPixelX>
        <refPixelY>480.5</refPixelY>
        <resetDelay>0.11</resetDelay>
        <resolution>0.0</resolution>
        <scienceArea>20.0 x 122.88 arcsec</scienceArea>
        <source_mag>10-11</source_mag>
        <spectralCoverage>2.030um-2.370um</spectralCoverage>
        <waveform>uist_starev11</waveform>
      </SpInstUIST>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>At the time of writing there was no dedicated pipeline recipe for coronographic imaging.  Please see the UIST web pages, or contact your support scientist, for updates.</note>
        <title>DR Recipe selection</title>
      </SpNote>
      <SpDRRecipe type="oc" subtype="DRRecipe">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <meta_unique>true</meta_unique>
        <ArcInGroup>false</ArcInGroup>
        <ArcRecipe>REDUCE_ARC</ArcRecipe>
        <BiasInGroup>false</BiasInGroup>
        <BiasRecipe>REDUCE_BIAS</BiasRecipe>
        <DRRecipe>JITTER_SELF_FLAT</DRRecipe>
        <DarkInGroup>false</DarkInGroup>
        <DarkRecipe>REDUCE_DARK</DarkRecipe>
        <FlatInGroup>false</FlatInGroup>
        <FlatRecipe>REDUCE_FLAT</FlatRecipe>
        <FocusInGroup>false</FocusInGroup>
        <FocusRecipe>REDUCE_FOCUS</FocusRecipe>
        <ObjectInGroup>true</ObjectInGroup>
        <ObjectRecipe>QUICK_LOOK</ObjectRecipe>
        <SkyInGroup>true</SkyInGroup>
        <SkyRecipe>QUICK_LOOK</SkyRecipe>
        <title>QUICK_LOOK</title>
      </SpDRRecipe>
      <SpIterFolder type="if" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <SpNote type="no" subtype="none">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <note>The 0,0 offset and observe below are used for acquisition only.  You will acquire the target at the break "before" this observe, then continue and take the short-exposure frame to check that the source is behind the wire.</note>
          <title>Offset/Observe for acquisition only</title>
        </SpNote>
        <SpIterOffset type="ic" subtype="offset">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <meta_gui_selectedOffsetPos>Offset0</meta_gui_selectedOffsetPos>
          <obsArea>
            <PA>-90.0</PA>
            <OFFSET>
              <DC1>0.0</DC1>
              <DC2>0.0</DC2>
            </OFFSET>
          </obsArea>
          <title>For acquisition only</title>
        </SpIterOffset>
        <SpIterObserve type="ic" subtype="observe">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <repeatCount>1</repeatCount>
        </SpIterObserve>
        <SpNote type="no" subtype="none">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <note>The darks below flush the array and also provide a frame for dark-subtraction.  They should have the same exposure time as used below for the coronographic imaging, so DON'T click on "set default"</note>
          <title>Darks</title>
        </SpNote>
        <SpIterDarkObs type="ic" subtype="darkObs">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <coadds>1</coadds>
          <exposureTime>20.0</exposureTime>
          <repeatCount>3</repeatCount>
        </SpIterDarkObs>
        <SpNote type="no" subtype="none">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <note>The iterator below sets the exposure time for the coronographic imaging.  These will be longer than the 1 or 2 secs used for the acquisition process above. 10-20 secs are recomended for 7-9th mag point sources and moderate seeing (0.6-0.7 arcsec).</note>
          <title>UIST iterator</title>
        </SpNote>
        <SpIterUISTImaging type="ic" subtype="instUISTImaging">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <coaddsIter>1</coaddsIter>
          <exposureTimeIter>20.0</exposureTimeIter>
          <iterConfigList>
            <value>exposureTimeIter</value>
            <value>coaddsIter</value>
          </iterConfigList>
          <SpIterRepeat type="ic" subtype="repeat">
            <meta_gui_collapsed>false</meta_gui_collapsed>
            <repeatCount>1</repeatCount>
            <title>Repeat 1X</title>
            <SpNote type="no" subtype="none">
              <meta_gui_collapsed>false</meta_gui_collapsed>
              <note>These offsets nod the source between the wire and postions behind the mask or off the array.  The latter are used as "sky frames"; they are used to construct a flat-field.  The object is also nudged slightly up and down the wire to correct for bad pixels. 

19 frames in all give 10 on sky and 9 with the source behind the wire. Fewer offsets could also be used, e.g. 6 on sky and 5 on source.  In both cases, the seqeunce starts and end on sky.

NOTE: Offsets in q move move along the wire, regardless of posn angle.  An offset of q= +24 would put the target midway between the two rectangular apertures in the coronographic mask. An offset of q= +48 would put the star in the top aperture;  for bright sources this is obviously NOT recommended.</note>
              <title>offsets</title>
            </SpNote>
            <SpIterOffset type="ic" subtype="offset">
              <meta_gui_collapsed>false</meta_gui_collapsed>
              <meta_gui_selectedOffsetPos>Offset0</meta_gui_selectedOffsetPos>
              <obsArea>
                <PA>-90.0</PA>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>24.0</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>0.0</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>-24.0</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>-1.2</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>-10.0</DC1>
                  <DC2>24.0</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>1.2</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>-10.0</DC1>
                  <DC2>-24.0</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>-0.6</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>10.0</DC1>
                  <DC2>24.0</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>0.6</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>10.0</DC1>
                  <DC2>-24.0</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>-0.9</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>5.0</DC1>
                  <DC2>24.0</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>0.9</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>5.0</DC1>
                  <DC2>-24.0</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>-0.3</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>-5.0</DC1>
                  <DC2>24.0</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>0.0</DC1>
                  <DC2>0.3</DC2>
                </OFFSET>
                <OFFSET>
                  <DC1>-5.0</DC1>
                  <DC2>-24.0</DC2>
                </OFFSET>
              </obsArea>
              <title>19-point offset pattern</title>
              <SpIterObserve type="ic" subtype="observe">
                <meta_gui_collapsed>false</meta_gui_collapsed>
                <repeatCount>1</repeatCount>
              </SpIterObserve>
            </SpIterOffset>
          </SpIterRepeat>
        </SpIterUISTImaging>
      </SpIterFolder>
    </SpObs>
  </SpMSB>
  <SpMSB checksum="bf02b357609a6f233f6e0df3d786d7b0A" remaining="99" type="og" subtype="msb">
    <meta_gui_collapsed>true</meta_gui_collapsed>
    <estimatedDuration units="seconds">737.63896</estimatedDuration>
    <library_version>$Revision$</library_version>
    <priority>99</priority>
    <title>Coronographic Imaging Pol (UIST - imaging)</title>
    <totalDuration units="seconds">1361.63896</totalDuration>
    <SpNote type="no" subtype="none">
      <meta_gui_collapsed>false</meta_gui_collapsed>
      <note>Basic Idea:
=======

With Coronographic imaging polarimetry, the user may use either a 6-pixel (0.7arcsec) or an 11-pixel (1.3 arcsec) wire.  These are suspended 1/4 and 3/4 of the way along a 120"x20" rectangular aperture in the bottom/western half of the array.  A similar-sized aperture in the top half of the array will be used for sky-subtraction (see UKIRT-IRPOL web-page for details). The posn angle can be used to orientate the source so that extended objects are perpendicular to the wire; e.g. a disk orientated E-W should use a Posn-angle of 0 degs, while a disk orientated N-S should use a posn angle of -90 degs.  Any angle between -90 and +90 degrees can be used.

By default the acquisition process described below will put the source behind the 6-pixel wire.  If the wider occultor is required, all offsets should have a p value of -62.6 arcsec (this being the distance between the two wires); note, offsets in q are along the wire, which is ~20" in length..

Imaging acquisition:
============

In the UIST component in the "Coronographic Pol" observation (below), set the instrument for coronographic imaging (coron mask, filter, full array, NDSTARE, etc.) but SELECT A SHORT EXPOSURE TIME for imaging acquisition (1sec for bright stars/point sources, maybe with a few coadds).  The exposure time to be used for the actual coronographic imaging will be set in the "UIST Imaging" iterator further down the sequence.

At the telescope UIST will be set for coronographic observations with your chosen posn angles BUT it will have a short exposure time.  At the break in the sequence, the observer runs Movie, acquires the target as if he/she were doing spectroscopy (i.e. using Gaia - pick object and UPICK on the TCS) , then continues the sequence.  Immediately after acquisition a short-exposure frame will be taken on the target (so you can see that its behind the wire) before the exposure time/coadds are increased for the actual coronagraphic observations.</note>
      <title>How to do Coron imaging polarimetry</title>
    </SpNote>
    <SpObs msb="false" optional="true" remaining="1" type="ob" subtype="none">
      <meta_gui_collapsed>true</meta_gui_collapsed>
      <meta_gui_selected>false</meta_gui_selected>
      <estimatedDuration units="seconds">624.0</estimatedDuration>
      <standard>true</standard>
      <title>make_skyflat for Pol (Imaging)</title>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>This sequence obtains eight frames, two at each waveplate angle, that are median averaged to make a "master" flat field for use with all subsequent target pol observations.

N.B.  All current Polarimetry recipes require a separate flat field (and dark).</note>
        <title>Usage</title>
      </SpNote>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>Select a piece of blank sky near your target.

For a step-by-step guide to how to use the position editor use "help".</note>
        <title>target information</title>
      </SpNote>
      <SpTelescopeObsComp type="oc" subtype="targetList">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <meta_gui_selected>false</meta_gui_selected>
        <meta_gui_selectedTelescopePos>Base</meta_gui_selectedTelescopePos>
        <meta_unique>true</meta_unique>
        <BASE TYPE="Base">
          <target>
            <targetName>Sky Flat</targetName>
            <spherSystem SYSTEM="J2000">
              <c1>0:0:0</c1>
              <c2>0:0:0</c2>
              <rv defn="radio" frame="LSR">0.0</rv>
            </spherSystem>
          </target>
        </BASE>
      </SpTelescopeObsComp>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>Sent for long, K-band exposures for a good flat-field.   Make sure the polarimetry box is ticked.</note>
        <title>UIST component</title>
      </SpNote>
      <SpInstUIST type="oc" subtype="inst.UIST">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <meta_unique>true</meta_unique>
        <meta_version>3</meta_version>
        <DAConf>ND1</DAConf>
        <DAConfMinExpT>0.81</DAConfMinExpT>
        <DAConfMinExpTime>0.81</DAConfMinExpTime>
        <arrayAngle>0.54</arrayAngle>
        <biasDutyCycle>0.507</biasDutyCycle>
        <biasIdlePeriod>0.0022</biasIdlePeriod>
        <biasMustIdles>100</biasMustIdles>
        <biasNResets>2</biasNResets>
        <biasObsTime>9.468</biasObsTime>
        <biasReadArea>1024x1024</biasReadArea>
        <biasRefPixelX>512.5</biasRefPixelX>
        <biasRefPixelY>512.5</biasRefPixelY>
        <biasWaveform>uist_starev11</biasWaveform>
        <camera>imaging</camera>
        <centralWavelength>2.2</centralWavelength>
        <chopDelay>0.0</chopDelay>
        <chopFrequency>0.0</chopFrequency>
        <coadds>1</coadds>
        <configType>Normal</configType>
        <darkFilter>black_blank</darkFilter>
        <disperser>wollaston</disperser>
        <dispersion>0.0</dispersion>
        <dutyCycle>0.9655622565576161</dutyCycle>
        <expTimeOT>60.0</expTimeOT>
        <exposureTime>60.0</exposureTime>
        <filter>K98</filter>
        <filterCategory>broad</filterCategory>
        <focus>3.28</focus>
        <idlePeriod>0.0022</idlePeriod>
        <imager>0.12</imager>
        <instAper>
          <value>27.93</value>
          <value>-1.11</value>
          <value>0.00</value>
          <value>2.00</value>
        </instAper>
        <instPntgOffset>
          <value>17.24</value>
          <value>8.2076</value>
        </instPntgOffset>
        <instPort>South</instPort>
        <mask>coronograph</mask>
        <maskHeight>20.0</maskHeight>
        <maskWidth>1024.0</maskWidth>
        <mode>NDSTARE</mode>
        <mustIdles>100</mustIdles>
        <nreads>61</nreads>
        <nresets>1</nresets>
        <nullCycles>0</nullCycles>
        <nullExposures>0</nullExposures>
        <nullReads>1</nullReads>
        <obsTimeOT>60.0</obsTimeOT>
        <observationTime>62.13996</observationTime>
        <order>0</order>
        <pixelFOV>0.1205 x 0.1205</pixelFOV>
        <pixelScale>0.12</pixelScale>
        <polarimetry>yes</polarimetry>
        <posAngle>-90.0</posAngle>
        <pupil_imaging>no</pupil_imaging>
        <readArea>1024x1024</readArea>
        <readInterval>1.0</readInterval>
        <readMode>NDSTARE</readMode>
        <readout>NDSTARE</readout>
        <readoutOT>NDSTARE 1024x1024</readoutOT>
        <refPixelL>512.5</refPixelL>
        <refPixelS>480.5</refPixelS>
        <refPixelX>480.5</refPixelX>
        <refPixelY>480.5</refPixelY>
        <resetDelay>0.11</resetDelay>
        <resolution>0.0</resolution>
        <scienceArea>20.0 x 122.88 arcsec</scienceArea>
        <source_mag>&gt;15</source_mag>
        <spectralCoverage>2.030um-2.370um</spectralCoverage>
        <target_acq>no</target_acq>
        <waveform>uist_starev11</waveform>
      </SpInstUIST>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>Recipe requires at least two frames at each of the 4 waveplate positions (0, 45, 22.5 and 67.5 degrees).  All frames should be at different positions on blank sky.  All frames are median averaged, regardless of the waveplate angle,  to make a "master-pol-flat".

N.B.: A Dark MUST be obtained first.  If you need separate flats for each waveplate position, select observation "make_skyflat for each WP angle" instead (see bottom of this library).</note>
        <title>Pol recipe</title>
      </SpNote>
      <SpDRRecipe type="oc" subtype="DRRecipe">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <meta_gui_selected>false</meta_gui_selected>
        <meta_unique>true</meta_unique>
        <ArcInGroup>false</ArcInGroup>
        <ArcRecipe>REDUCE_ARC</ArcRecipe>
        <BiasInGroup>false</BiasInGroup>
        <BiasRecipe>REDUCE_BIAS</BiasRecipe>
        <DRRecipe>JITTER_SELF_FLAT</DRRecipe>
        <DarkInGroup>false</DarkInGroup>
        <DarkRecipe>REDUCE_DARK</DarkRecipe>
        <FlatInGroup>false</FlatInGroup>
        <FlatRecipe>REDUCE_FLAT</FlatRecipe>
        <FocusInGroup>false</FocusInGroup>
        <FocusRecipe>REDUCE_FOCUS</FocusRecipe>
        <ObjectInGroup>true</ObjectInGroup>
        <ObjectRecipe>SKY_FLAT_POL</ObjectRecipe>
        <SkyInGroup>true</SkyInGroup>
        <SkyRecipe>SKY_FLAT_POL</SkyRecipe>
        <title>SKY_FLAT_POL</title>
      </SpDRRecipe>
      <SpIterFolder type="if" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <meta_gui_selected>false</meta_gui_selected>
        <SpIterDarkObs type="ic" subtype="darkObs">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <coadds>1</coadds>
          <exposureTime>60.0</exposureTime>
          <repeatCount>1</repeatCount>
        </SpIterDarkObs>
        <SpIterIRPOL type="ic" subtype="instIRPOL">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <IRPOLIter>0</IRPOLIter>
          <iterConfigList>IRPOLIter</iterConfigList>
          <SpIterOffset type="ic" subtype="offset">
            <meta_gui_collapsed>false</meta_gui_collapsed>
            <meta_gui_selectedOffsetPos>Offset0</meta_gui_selectedOffsetPos>
            <obsArea>
              <PA>-90.0</PA>
              <OFFSET>
                <DC1>0.0</DC1>
                <DC2>0.0</DC2>
              </OFFSET>
              <OFFSET>
                <DC1>0.0</DC1>
                <DC2>-60.0</DC2>
              </OFFSET>
            </obsArea>
            <SpIterObserve type="ic" subtype="observe">
              <meta_gui_collapsed>false</meta_gui_collapsed>
              <repeatCount>1</repeatCount>
            </SpIterObserve>
          </SpIterOffset>
        </SpIterIRPOL>
        <SpIterIRPOL type="ic" subtype="instIRPOL">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <IRPOLIter>45</IRPOLIter>
          <iterConfigList>IRPOLIter</iterConfigList>
          <SpIterOffset type="ic" subtype="offset">
            <meta_gui_collapsed>false</meta_gui_collapsed>
            <meta_gui_selectedOffsetPos>Offset0</meta_gui_selectedOffsetPos>
            <obsArea>
              <PA>-90.0</PA>
              <OFFSET>
                <DC1>60.0</DC1>
                <DC2>0.0</DC2>
              </OFFSET>
              <OFFSET>
                <DC1>-60.0</DC1>
                <DC2>0.0</DC2>
              </OFFSET>
            </obsArea>
            <SpIterObserve type="ic" subtype="observe">
              <meta_gui_collapsed>false</meta_gui_collapsed>
              <repeatCount>1</repeatCount>
            </SpIterObserve>
          </SpIterOffset>
        </SpIterIRPOL>
        <SpIterIRPOL type="ic" subtype="instIRPOL">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <IRPOLIter>22.5</IRPOLIter>
          <iterConfigList>IRPOLIter</iterConfigList>
          <SpIterOffset type="ic" subtype="offset">
            <meta_gui_collapsed>false</meta_gui_collapsed>
            <meta_gui_selectedOffsetPos>Offset0</meta_gui_selectedOffsetPos>
            <obsArea>
              <PA>-90.0</PA>
              <OFFSET>
                <DC1>60.0</DC1>
                <DC2>60.0</DC2>
              </OFFSET>
              <OFFSET>
                <DC1>60.0</DC1>
                <DC2>-60.0</DC2>
              </OFFSET>
            </obsArea>
            <SpIterObserve type="ic" subtype="observe">
              <meta_gui_collapsed>false</meta_gui_collapsed>
              <repeatCount>1</repeatCount>
            </SpIterObserve>
          </SpIterOffset>
        </SpIterIRPOL>
        <SpIterIRPOL type="ic" subtype="instIRPOL">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <IRPOLIter>67.5</IRPOLIter>
          <iterConfigList>IRPOLIter</iterConfigList>
          <SpIterOffset type="ic" subtype="offset">
            <meta_gui_collapsed>false</meta_gui_collapsed>
            <meta_gui_selectedOffsetPos>Offset0</meta_gui_selectedOffsetPos>
            <obsArea>
              <PA>-90.0</PA>
              <OFFSET>
                <DC1>-60.0</DC1>
                <DC2>60.0</DC2>
              </OFFSET>
              <OFFSET>
                <DC1>-60.0</DC1>
                <DC2>-60.0</DC2>
              </OFFSET>
            </obsArea>
            <SpIterObserve type="ic" subtype="observe">
              <meta_gui_collapsed>false</meta_gui_collapsed>
              <repeatCount>1</repeatCount>
            </SpIterObserve>
          </SpIterOffset>
        </SpIterIRPOL>
        <SpNote type="no" subtype="none">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <note>Return waveplate to 0 degrees and the telescope offsets to 0,0.</note>
          <title>Back to zero</title>
        </SpNote>
        <SpIterOffset type="ic" subtype="offset">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <meta_gui_selectedOffsetPos>Offset0</meta_gui_selectedOffsetPos>
          <obsArea>
            <PA>-90.0</PA>
            <OFFSET>
              <DC1>0.0</DC1>
              <DC2>0.0</DC2>
            </OFFSET>
          </obsArea>
        </SpIterOffset>
        <SpIterIRPOL type="ic" subtype="instIRPOL">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <IRPOLIter>0</IRPOLIter>
          <iterConfigList>IRPOLIter</iterConfigList>
        </SpIterIRPOL>
      </SpIterFolder>
    </SpObs>
    <SpObs msb="false" optional="false" remaining="1" type="ob" subtype="none">
      <meta_gui_collapsed>true</meta_gui_collapsed>
      <estimatedDuration units="seconds">737.63896</estimatedDuration>
      <standard>false</standard>
      <title>Coronographic Pol</title>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>Enter your target co-ordinates into the target list below.  Note that although this is called a "target list" it really only allows you to specify ONE astronomical target.

When you have done so you can use the "position editor" to  select a guide star (avoiding the waveplate holder), to fine tune the co-ordinate based on a sky survey picture, examine offset locations on the field etc.

For a step-by-step guide to how to use the position editor use "help".</note>
        <title>Target information</title>
      </SpNote>
      <SpTelescopeObsComp type="oc" subtype="targetList">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <meta_gui_selectedTelescopePos>Base</meta_gui_selectedTelescopePos>
        <meta_unique>true</meta_unique>
        <BASE TYPE="Base">
          <target>
            <targetName>S106-IR</targetName>
            <spherSystem SYSTEM="J2000">
              <c1>20:27:26.7</c1>
              <c2>37:22:48</c2>
              <rv defn="radio" frame="LSR">0.0</rv>
            </spherSystem>
          </target>
        </BASE>
        <BASE TYPE="GUIDE">
          <target>
            <targetName></targetName>
            <spherSystem SYSTEM="J2000">
              <c1>20:27:22.16</c1>
              <c2>37:22:57.39</c2>
              <rv defn="radio" frame="LSR">0.0</rv>
            </spherSystem>
          </target>
        </BASE>
      </SpTelescopeObsComp>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>Make sure polarimetry is ticked, the coronograph is selected, and the exposure time is short (1sec usually) for IMAGING ACQUISITION.

A posn angle of -90 gives the default orientation for UIST imaging, i.e. N left and E up.
This is the default angle used with ordinary imaging polarimetry, though any angle between -90 and +90 can be used with the coronographic mask.</note>
        <title>UIST component</title>
      </SpNote>
      <SpInstUIST type="oc" subtype="inst.UIST">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <meta_unique>true</meta_unique>
        <meta_version>3</meta_version>
        <DAConf>ND1</DAConf>
        <DAConfMinExpT>0.81</DAConfMinExpT>
        <arrayAngle>0.54</arrayAngle>
        <biasDutyCycle>0.507</biasDutyCycle>
        <biasIdlePeriod>0.0022</biasIdlePeriod>
        <biasMustIdles>100</biasMustIdles>
        <biasNResets>2</biasNResets>
        <biasObsTime>9.468</biasObsTime>
        <biasReadArea>1024x1024</biasReadArea>
        <biasRefPixelX>512.5</biasRefPixelX>
        <biasRefPixelY>512.5</biasRefPixelY>
        <biasWaveform>uist_starev11</biasWaveform>
        <camera>imaging</camera>
        <centralWavelength>2.2</centralWavelength>
        <chopDelay>0.0</chopDelay>
        <chopFrequency>0.0</chopFrequency>
        <coadds>1</coadds>
        <configType>Normal</configType>
        <darkFilter>black_blank</darkFilter>
        <disperser>wollaston</disperser>
        <dispersion>0.0</dispersion>
        <dutyCycle>0.31847539459101387</dutyCycle>
        <expTimeOT>1.0</expTimeOT>
        <exposureTime>1.0</exposureTime>
        <filter>K98</filter>
        <filterCategory>broad</filterCategory>
        <focus>3.28</focus>
        <idlePeriod>0.0022</idlePeriod>
        <imager>0.12</imager>
        <instAper>
          <value>27.93</value>
          <value>-1.11</value>
          <value>0.00</value>
          <value>2.00</value>
        </instAper>
        <instPntgOffset>
          <value>17.24</value>
          <value>8.2076</value>
        </instPntgOffset>
        <instPort>South</instPort>
        <mask>coronograph</mask>
        <maskHeight>20.0</maskHeight>
        <maskWidth>1024.0</maskWidth>
        <mode>NDSTARE</mode>
        <mustIdles>100</mustIdles>
        <nreads>2</nreads>
        <nresets>1</nresets>
        <nullCycles>0</nullCycles>
        <nullExposures>0</nullExposures>
        <nullReads>1</nullReads>
        <obsTimeOT>10.0</obsTimeOT>
        <observationTime>3.1399600000000003</observationTime>
        <order>0</order>
        <pixelFOV>0.1205 x 0.1205</pixelFOV>
        <pixelScale>0.12</pixelScale>
        <polarimetry>yes</polarimetry>
        <posAngle>-90.0</posAngle>
        <pupil_imaging>no</pupil_imaging>
        <readArea>1024x1024</readArea>
        <readInterval>1.0</readInterval>
        <readMode>NDSTARE</readMode>
        <readout>NDSTARE</readout>
        <readoutOT>NDSTARE 1024x1024</readoutOT>
        <refPixelL>512.5</refPixelL>
        <refPixelS>480.5</refPixelS>
        <refPixelX>480.5</refPixelX>
        <refPixelY>480.5</refPixelY>
        <resetDelay>0.11</resetDelay>
        <resolution>0.0</resolution>
        <scienceArea>20.0 x 122.88 arcsec</scienceArea>
        <source_mag>11-12</source_mag>
        <spectralCoverage>2.030um-2.370um</spectralCoverage>
        <waveform>uist_starev11</waveform>
      </SpInstUIST>
      <SpNote type="no" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <note>POL_JITTER_CORON expects an 3-point jitter at each of the four waveplate angles (0, 45, 22.5, and 67.5 degrees).   With the coronograph the jitter positions are slight offsets along the wire.  All offset positions are observed BEFORE the waveplate is moved.

N.B.: A flat field MUST be filed before this recipe is run (using a "make_skyflat..." observation).  An appropriate dark must also be obtained.</note>
        <title>Pol recipe selection</title>
      </SpNote>
      <SpDRRecipe type="oc" subtype="DRRecipe">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <meta_unique>true</meta_unique>
        <ArcInGroup>false</ArcInGroup>
        <ArcRecipe>REDUCE_ARC</ArcRecipe>
        <BiasInGroup>false</BiasInGroup>
        <BiasRecipe>REDUCE_BIAS</BiasRecipe>
        <DRRecipe>JITTER_SELF_FLAT</DRRecipe>
        <DarkInGroup>false</DarkInGroup>
        <DarkRecipe>REDUCE_DARK</DarkRecipe>
        <FlatInGroup>false</FlatInGroup>
        <FlatRecipe>REDUCE_FLAT</FlatRecipe>
        <FocusInGroup>false</FocusInGroup>
        <FocusRecipe>REDUCE_FOCUS</FocusRecipe>
        <ObjectInGroup>true</ObjectInGroup>
        <ObjectRecipe>POL_JITTER_CORON</ObjectRecipe>
        <SkyInGroup>true</SkyInGroup>
        <SkyRecipe>POL_JITTER_CORON</SkyRecipe>
        <title>POL_JITTER_CORON</title>
      </SpDRRecipe>
      <SpIterFolder type="if" subtype="none">
        <meta_gui_collapsed>false</meta_gui_collapsed>
        <SpNote type="no" subtype="none">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <note>The 0,0 offset and observe below are used for acquisition only.  You will acquire the target at the break "before" this observe, then continue and take the short-exposure frame to check that the source is behind the wire.</note>
          <title>Offset/Observe for acquisition only</title>
        </SpNote>
        <SpIterOffset type="ic" subtype="offset">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <meta_gui_selectedOffsetPos>Offset0</meta_gui_selectedOffsetPos>
          <obsArea>
            <PA>-90.0</PA>
            <OFFSET>
              <DC1>0.0</DC1>
              <DC2>0.0</DC2>
            </OFFSET>
          </obsArea>
        </SpIterOffset>
        <SpIterObserve type="ic" subtype="observe">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <repeatCount>1</repeatCount>
        </SpIterObserve>
        <SpNote type="no" subtype="none">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <note>The darks below flush the array and also provide a frame for dark-subtraction.  They should have the same exposure time as used below for the coronographic imaging, so DON'T click on "set default"</note>
          <title>Darks</title>
        </SpNote>
        <SpIterDarkObs type="ic" subtype="darkObs">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <coadds>2</coadds>
          <exposureTime>10.0</exposureTime>
          <repeatCount>1</repeatCount>
        </SpIterDarkObs>
        <SpNote type="no" subtype="none">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <note>Use the iterator below to set the exposure time (and coadds) needed for the actual coronographic imaging.  These will be longer than the 1 or 2 secs used for the acquisition process above. 10-20 secs are recomended for 7-9th mag point sources and moderate seeing (0.6-0.7 arcsec).</note>
          <title>Uist iterator below</title>
        </SpNote>
        <SpIterUISTImaging type="ic" subtype="instUISTImaging">
          <meta_gui_collapsed>false</meta_gui_collapsed>
          <coaddsIter>2</coaddsIter>
          <exposureTimeIter>10.0</exposureTimeIter>
          <iterConfigList>
            <value>exposureTimeIter</value>
            <value>coaddsIter</value>
          </iterConfigList>
          <SpIterRepeat type="ic" subtype="repeat">
            <meta_gui_collapsed>false</meta_gui_collapsed>
            <repeatCount>2</repeatCount>
            <title>Repeat 2X</title>
            <SpIterIRPOL type="ic" subtype="instIRPOL">
              <meta_gui_collapsed>false</meta_gui_collapsed>
              <IRPOLIter>
                <value>0</value>
                <value>45</value>
                <value>22.5</value>
                <value>67.5</value>
              </IRPOLIter>
              <iterConfigList>IRPOLIter</iterConfigList>
              <SpNote type="no" subtype="none">
                <meta_gui_collapsed>false</meta_gui_collapsed>
                <note>Offsets should be in "q" (along the wire), and in multiples of 0.12 arcsec pixels.  The offsets will be repeated for each of the four nominal waveplate angles.</note>
                <title>Offsets along wire at each WP angle</title>
              </SpNote>
              <SpIterOffset type="ic" subtype="offset">
                <meta_gui_collapsed>false</meta_gui_collapsed>
                <meta_gui_selectedOffsetPos>Offset0</meta_gui_selectedOffsetPos>
                <obsArea>
                  <PA>-90.0</PA>
                  <OFFSET>
                    <DC1>0.0</DC1>
                    <DC2>0.0</DC2>
                  </OFFSET>
                  <OFFSET>
                    <DC1>0.0</DC1>
                    <DC2>-0.6</DC2>
                  </OFFSET>
                  <OFFSET>
                    <DC1>0.0</DC1>
                    <DC2>0.6</DC2>
                  </OFFSET>
                </obsArea>
                <SpIterObserve type="ic" subtype="observe">
                  <meta_gui_collapsed>false</meta_gui_collapsed>
                  <repeatCount>1</repeatCount>
                </SpIterObserve>
              </SpIterOffset>
            </SpIterIRPOL>
          </SpIterRepeat>
        </SpIterUISTImaging>
      </SpIterFolder>
    </SpObs>
  </SpMSB>
</SpProg>