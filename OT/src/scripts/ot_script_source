#!/bin/csh -f 
######################################################################################### 
# This file has been automatically generated by "gmake" using the setting in            # 
# ../conf/make.conf. Modifications can be lost after a new make.                     
#                                                                                       # 
# For editing this script and keeping the modifications make a copy of this script in   # 
# this directory and edit the copy.                                                     # 
######################################################################################### 
 
set OT_USERDIR=`pwd` 
 
cd `dirname $0` 
 
#set JAVA = /star/java/jre-1.3.1_02/bin/java 
 
# The telescope names in this list should correspond to the directories in CFG_DIRS. 
# (generated from ../conf/make.conf) 
set TELESCOPE_LIST = "ukirt jcmt" 

set CFG_DIRS     = ../cfg
 
# (generated from ../conf/make.conf) 
set CLASSPATH = ../../install/classes:../../../GEMINI/install/classes:../../../ORAC/install/classes:../../../ODB/install/classes:../../../OMP/install/classes:../../../EDFREQ/install/classes:../../../EDFREQ/install/cfg:../tools/diva.jar:../../tools/fits.jar:../../tools/graph.jar:../../tools/hcompress.jar:../../tools/image.jar:../../tools/jacl.jar:../../tools/jdom-b4.jar:../../tools/jel.jar:../../tools/jfreechart.jar:../../tools/jsky.jar:../../tools/junit.jar:../../tools/log4j-core.jar:../../tools/tcljava.jar:../../tools/util.jar:../../../ORAC/tools/jhall.jar:../../../ORAC/tools/jhtools.jar:../../../ORAC/tools/xercesImpl.jar:../../../ORAC/tools/xmlParserAPIs.jar:../../../OMP/tools/activation.jar:../../../OMP/tools/mail.jar:../../../OMP/tools/soap.jar:../../../EDFREQ/tools/JSX1.0.1.1.jar 
 

# Specify a server (science program database)
# ATC		(ATC Development)
# HILO		(Hilo Development)
# HOME		(Home Development)
# DEPLOYED        (Deployed Server)
set SERVER = ATC

set TELESCOPE = "" 
set INTERNAL_FRAMES = -nointernalframes 
set OMP_FLAG = "" 
set EDFREQ_CFG = "edfreq/acsisCfg.xml"
set USAGE = "Usage: $0 [-h] [-[no]internalframes] [-[no]omp] [-server ATC|HILO|HOME|DEPLOYED] <telescope>\n  where <telescope> is one of: ${TELESCOPE_LIST}\n"
 
############################## 
#                            # 
# Parsing arguments          # 
#                            # 
# ############################ 
while ("$1" != "")
  if("$1" == "-h") then 
    printf "${USAGE}" 
    exit 
  else if("$1" == "-internalframes") then 
    set INTERNAL_FRAMES = -internalframes 
  else if("$1" == "-nointernalframes") then 
    set INTERNAL_FRAMES = -nointernalframes 
  else if("$1" == "-omp") then 
    set OMP_FLAG = -DOMP 
  else if("$1" == "-noomp") then 
    set OMP_FLAG = "" 
  else if("$1" == "-das") then 
    set EDFREQ_CFG = "edfreq/dasCfg.xml" 
  else if("$1" == "-server") then
    shift
    set SERVER = $1
  else if(-d ${CFG_DIRS}/"$1") then 
    set TELESCOPE = $1 
  else 
    echo Telescope configuration directory $1 not found in ${CFG_DIRS} 
    printf "${USAGE}" 
    exit 
  endif 
  shift
end 
 
if("${TELESCOPE}" == "") then 
  printf "${USAGE}" 
  exit 
endif 

echo Settings:

echo "  Telescope:       ${TELESCOPE}"
echo "  Server:          ${SERVER}"

if("${OMP_FLAG}" == "-DOMP") then
  echo "  Database:        OMP/XML"
else if ("${OMP_FLAG}" == "") then
  echo "  Database:        RMI/SGML"
else
  printf "\nError: Variable OMP_FLAG has invalid value \042${OMP_FLAG}\042. Allowed values: \042-DOMP\042, \042\042.\n\n"
endif

if("${INTERNAL_FRAMES}" == "-internalframes") then
  echo "  Internal Frames: Yes"
else if("${INTERNAL_FRAMES}" == "-nointernalframes") then
  echo "  Internal Frames: No"
else
  printf "\nError: Variable INTERNAL_FRAMES has invalid value \042${INTERNAL_FRAMES}\042. Allowed values: \042-internalframes\042, \042-nointernalframes\042.\n\n"
endif

echo "Use ot -h for information on how to change these settings."

if (${?OT_CATALOG_FILE}) then
    set CATALOG_FILE = ${OT_CATALOG_FILE}
else
    set CATALOG_FILE
endif

set CFG_TELESCOPE_DIR = ${CFG_DIRS}/${TELESCOPE} 
 
${JAVA} -ms5m -mx100m -oss5m -DFREQ_EDITOR_CFG=${EDFREQ_CFG} ${OMP_FLAG} -DSERVER=${SERVER} -Djsky.catalog.skycat.config=${CFG_TELESCOPE_DIR}/skycat.cfg -Dot.cfgdir=${CFG_TELESCOPE_DIR}/ -Dot.resource.cfgdir=./ -Dot.userdir=${OT_USERDIR} -DOT_CATALOG_FILE=${CATALOG_FILE} -classpath ${CLASSPATH}:${CFG_TELESCOPE_DIR} jsky.app.ot.OT ${INTERNAL_FRAMES}

